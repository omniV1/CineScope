<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Basic metadata for proper rendering and character encoding -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /> <!-- Responsive viewport settings -->
    <title>CineScope - Movie Review Platform</title> <!-- Page title displayed in browser tab -->
    <base href="/" /> <!-- Base URL for all relative URLs in the document -->
    <!-- External CSS libraries -->
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />

    <!-- Bootstrap CSS framework for responsive design and components -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">

    <!-- Bootstrap Icons for additional iconography -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

    <!-- Application-specific CSS files -->
    <link rel="stylesheet" href="app.css" /> <!-- Main application styles -->
    <link rel="stylesheet" href="CineScope.Client.styles.css" /> <!-- Component-specific styles -->
    <!-- Favicon for browser tab icon -->
    <link rel="icon" type="image/png" href="favicon.png" />

    <!-- Authentication-specific styling -->
    <link rel="stylesheet" href="auth.css" />

    <!-- Inline styles for immediate application-specific styling -->
    <style>
        /* Base styling for body element */
        body {
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; /* Netflix-inspired font stack */
            background-color: #141414; /* Dark background similar to Netflix */
            color: #fff; /* White text for contrast on dark background */
        }

        /* Navigation bar styling */
        .navbar {
            background-color: rgba(0, 0, 0, 0.8) !important; /* Semi-transparent black with !important to override Bootstrap */
        }

        .navbar-brand {
            font-weight: bold; /* Bold text for brand */
            font-size: 1.5rem; /* Larger font size for brand */
        }

        /* Movie section container styling */
        .movie-section {
            position: relative;
            margin-bottom: 30px; /* Space between movie sections */
        }

            /* Headings within movie sections */
            .movie-section h2 {
                margin-bottom: 15px; /* Space below section headings */
                font-weight: 500; /* Medium font weight for headings */
            }

        /* Movie carousel container */
        .movie-carousel {
            position: relative;
            padding: 10px 0; /* Vertical padding */
        }

        /* Individual movie card styling */
        .movie-card {
            transition: transform 0.3s ease; /* Smooth transition for hover effect */
            cursor: pointer; /* Pointer cursor to indicate interactivity */
        }

            /* Hover effect for movie cards */
            .movie-card:hover {
                transform: scale(1.05); /* Slight enlargement on hover */
            }

            /* Image styling within movie cards */
            .movie-card img {
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* Subtle shadow for depth */
            }

            /* Title styling within movie cards */
            .movie-card h6 {
                color: white; /* White text on dark background */
                margin-top: 8px; /* Space above title */
                white-space: nowrap; /* Prevent line breaks */
                overflow: hidden; /* Hide overflowing text */
                text-overflow: ellipsis; /* Show ellipsis for truncated text */
            }

        /* Custom scrollbar styling for overflow containers */
        .overflow-auto::-webkit-scrollbar {
            height: 8px; /* Height of horizontal scrollbar */
        }

        .overflow-auto::-webkit-scrollbar-track {
            background: #262626; /* Dark gray scrollbar track */
            border-radius: 4px; /* Rounded corners */
        }

        .overflow-auto::-webkit-scrollbar-thumb {
            background: #e50914; /* Netflix red scrollbar thumb */
            border-radius: 4px; /* Rounded corners */
        }

        /* Darken featured movie images for better text contrast */
        .featured-movie img {
            filter: brightness(0.7); /* Reduce brightness to 70% */
        }

        /* Netflix-style danger/primary button */
        .btn-danger {
            background-color: #e50914; /* Netflix red */
            border-color: #e50914; /* Matching border color */
        }

        /* Outline button styling */
        .btn-outline-light {
            color: #fff; /* White text */
            border-color: rgba(255, 255, 255, 0.5); /* Semi-transparent white border */
        }

            /* Hover state for outline buttons */
            .btn-outline-light:hover {
                background-color: #e50914; /* Netflix red background on hover */
                border-color: #e50914; /* Matching border on hover */
            }

        /* Card component styling */
        .card {
            background-color: #181818; /* Dark gray background for cards */
            border: none; /* No border */
            transition: transform 0.3s ease; /* Smooth transition for hover effect */
        }

            /* Hover effect for cards */
            .card:hover {
                transform: scale(1.05); /* Slight enlargement on hover */
            }

        /* Loading screen text styling */
        .loading-progress-text {
            color: white; /* White text for loading message */
        }

        /* Blazor error UI styling */
        #blazor-error-ui {
            background-color: #e50914; /* Netflix red background for errors */
            color: white; /* White text for contrast */
            bottom: 0; /* Positioned at bottom of viewport */
            box-shadow: 0 -1px 2px rgba(0, 0, 0, 0.2); /* Subtle top shadow */
            display: none; /* Hidden by default, shown by Blazor when errors occur */
            left: 0; /* Full width positioning */
            padding: 0.6rem 1.25rem 0.7rem 1.25rem; /* Padding for content */
            position: fixed; /* Fixed position at bottom of viewport */
            width: 100%; /* Full width */
            z-index: 1000; /* High z-index to appear above other content */
        }

            /* Close button for error UI */
            #blazor-error-ui .dismiss {
                cursor: pointer; /* Pointer cursor for dismiss button */
                position: absolute; /* Absolute positioning */
                right: 0.75rem; /* Right margin */
                top: 0.5rem; /* Top margin */
            }

        /* Netflix-styled loading spinner */
        .spinner-border.text-danger {
            color: #e50914 !important; /* Netflix red with !important to override Bootstrap */
        }
    </style>
</head>
<body>
    <!-- Root application container for Blazor to attach to -->
    <div id="app">
        <!-- Initial loading screen that displays before Blazor is initialized -->
        <div class="loading-progress-text text-center mt-5">
            <h2>CINESCOPE</h2> <!-- Application title during loading -->
            <!-- Loading spinner with screen reader accessibility text -->
            <div class="spinner-border text-danger" role="status">
                <span class="visually-hidden">Loading...</span> <!-- Text for screen readers -->
            </div>
            <p>Loading your movie experience...</p> <!-- Loading message -->
        </div>
    </div>

    <!-- Blazor error UI container - hidden by default, shown when errors occur -->
    <div id="blazor-error-ui">
        An unhandled error has occurred.
        <a href="" class="reload">Reload</a> <!-- Reload button for error recovery -->
        <a class="dismiss">🗙</a> <!-- Dismiss button to close error message -->
    </div>

    <!-- Blazor WebAssembly script with autostart disabled for custom initialization -->
    <script src="_framework/blazor.webassembly.js" autostart="false"></script>
    <script>
        // Script for custom Blazor initialization and error handling

        // Log initial loading state
        console.log("Page loaded, preparing to start Blazor");

        // Global error event listener to catch and display any errors
        window.addEventListener('error', function (event) {
            console.error('Global error caught:', event.error);
            // Show error container
            document.getElementById('loading-error').style.display = 'block';
            // Set error message text
            document.getElementById('error-message').textContent = event.error ? event.error.toString() : 'Unknown error';
        });

        // Custom Blazor initialization with resource loading feedback
        Blazor.start({
            loadBootResource: function (type, name, defaultUri, integrity) {
                // Log each resource being loaded for debugging
                console.log(`Loading: ${type} - ${name}`);
                return defaultUri; // Use default URI for resource loading
            }
        }).then(function () {
            // Success callback
            console.log('Blazor started successfully');
        }).catch(function (error) {
            // Error callback
            console.error('Blazor failed to start:', error);
            document.getElementById('loading-error').style.display = 'block';
            document.getElementById('error-message').textContent = error.toString();
        });
    </script>

    <!-- Bootstrap JS with Popper for interactive components -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
</body>
</html>